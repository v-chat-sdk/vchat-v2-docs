"use strict";(self.webpackChunkvchat_v_2=self.webpackChunkvchat_v_2||[]).push([[3493],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>h});var a=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=a.createContext({}),d=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(i.Provider,{value:n},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=d(t),m=o,h=u["".concat(i,".").concat(m)]||u[m]||p[m]||r;return t?a.createElement(h,l(l({ref:n},c),{},{components:t})):a.createElement(h,l({ref:n},c))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=m;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s[u]="string"==typeof e?e:o,l[1]=s;for(var d=2;d<r;d++)l[d]=t[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2158:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var a=t(7462),o=(t(7294),t(3905));const r={sidebar_position:4,id:"socket.io",title:"Socket events"},l=void 0,s={unversionedId:"backend/socket.io",id:"backend/socket.io",title:"Socket events",description:"Socket Events",source:"@site/docs/backend/socket_io_apis.md",sourceDirName:"backend",slug:"/backend/socket.io",permalink:"/vchat-v2-docs/docs/backend/socket.io",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/backend/socket_io_apis.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,id:"socket.io",title:"Socket events"},sidebar:"tutorialSidebar",previous:{title:"S3 policy",permalink:"/vchat-v2-docs/docs/backend/s3"},next:{title:"Flutter intro",permalink:"/vchat-v2-docs/docs/flutter/intro"}},i={},d=[{value:"Socket Events",id:"socket-events",level:2},{value:"Client Listener (socket.on(&#39;EVENT&#39;))",id:"client-listener-socketonevent",level:3},{value:"1. <code>v1OnNewMessage</code>",id:"1-v1onnewmessage",level:4},{value:"2. <code>v1OnBanUserChat</code>",id:"2-v1onbanuserchat",level:4},{value:"3. <code>v1OnDeleteMessageFromAll</code>",id:"3-v1ondeletemessagefromall",level:4},{value:"4. <code>v1OnKickGroupMember</code>",id:"4-v1onkickgroupmember",level:4},{value:"5. <code>v1OnMyOnline</code>",id:"5-v1onmyonline",level:4},{value:"6. <code>v1OnRoomStatusChange</code>",id:"6-v1onroomstatuschange",level:4},{value:"7. <code>v1OnDeliverChatRoom</code>",id:"7-v1ondeliverchatroom",level:4},{value:"8. <code>v1OnException</code>",id:"8-v1onexception",level:4},{value:"9. <code>v1OnEnterChatRoom</code>",id:"9-v1onenterchatroom",level:4},{value:"Call Events (only if you use <code>vChatWebRtc</code>)",id:"call-events-only-if-you-use-vchatwebrtc",level:3}],c={toc:d},u="wrapper";function p(e){let{components:n,...r}=e;return(0,o.kt)(u,(0,a.Z)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"socket-events"},"Socket Events"),(0,o.kt)("p",null,"In this section, we will explain all socket.io events used by V Chat and their respective responses."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"to connect to the socket you need to make sure you use socket ",(0,o.kt)("inlineCode",{parentName:"li"},"clint v4")),(0,o.kt)("li",{parentName:"ul"},"add the auth to the ",(0,o.kt)("inlineCode",{parentName:"li"},"headers"),(0,o.kt)("img",{alt:"socket",src:t(4233).Z,width:"1185",height:"967"}))),(0,o.kt)("h3",{id:"client-listener-socketonevent"},"Client Listener (socket.on('EVENT'))"),(0,o.kt)("h4",{id:"1-v1onnewmessage"},"1. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnNewMessage")),(0,o.kt)("p",null,"Triggered when a new message is received. The response is a JSON object containing information about the message, including sender information, room information, content, and timestamps."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "sId": "63d6683a88c3d52e0e6dffa4",\n  "sIdentifier": "user1@gmail.com",\n  "sName": "user 1",\n  "sImg": "https://super-up-vchat.s3.eu-west-3.amazonaws.com/v-public/63d6683a88c3d52e0e6dffa4/pic100-063399d5-1dfb-4751-b392-59d3c0a4b5c0.jpg",\n  "plm": "other",\n  "rId": "63ebe4e6ed30938bc1d9203c",\n  "c": "1111111111111",\n  "isEncrypted": false,\n  "mT": "text",\n  "msgAtt": null,\n  "rTo": null,\n  "sAt": null,\n  "dAt": null,\n  "forId": null,\n  "dltAt": null,\n  "pBId": null,\n  "dF": [],\n  "stars": [],\n  "lId": "447bc1aa-bbf4-4de6-bc43-19d349398f02",\n  "linkAtt": null,\n  "peerData": null,\n  "_id": "6406443f14eb1e120ecd9007",\n  "createdAt": "2023-03-06T19:51:27.582Z",\n  "updatedAt": "2023-03-06T19:51:27.582Z"\n}\n')),(0,o.kt)("h4",{id:"2-v1onbanuserchat"},"2. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnBanUserChat")),(0,o.kt)("p",null,"Triggered when a user is banned from the chat. The response contains information about the user who was banned and the room they were banned from."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "isMeBanner": true,\n  "isPeerBanner": false,\n  "roomId": "roomId"\n}\n')),(0,o.kt)("h4",{id:"3-v1ondeletemessagefromall"},"3. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnDeleteMessageFromAll")),(0,o.kt)("p",null,"Triggered when a message is deleted for all users. The response is a normal message object with the ",(0,o.kt)("inlineCode",{parentName:"p"},"dltAt")," field containing the time the message was deleted."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "sId": "63d6683a88c3d52e0e6dffa4",\n  "sIdentifier": "user1@gmail.com",\n  "sName": "user 1",\n  "sImg": "https://super-up-vchat.s3.eu-west-3.amazonaws.com/v-public/63d6683a88c3d52e0e6dffa4/pic100-063399d5-1dfb-4751-b392-59d3c0a4b5c0.jpg",\n  "plm": "other",\n  "rId": "63ebe4e6ed30938bc1d9203c",\n  "c": "1111111111111",\n  "isEncrypted": false,\n  "mT": "text",\n  "msgAtt": null,\n  "rTo": null,\n  "sAt": null,\n  "dAt": null,\n  "forId": null,\n  "dltAt": "2023-03-06T19:51:27.582Z",\n  "pBId": null,\n  "dF": [],\n  "stars": [],\n  "lId": "447bc1aa-bbf4-4de6-bc43-19d349398f02",\n  "linkAtt": null,\n  "peerData": null,\n  "_id": "6406443f14eb1e120ecd9007",\n  "createdAt": "2023-03-06T19:51:27.582Z",\n  "updatedAt": "2023-03-06T19:51:27.582Z"\n}\n')),(0,o.kt)("h4",{id:"4-v1onkickgroupmember"},"4. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnKickGroupMember")),(0,o.kt)("p",null,"Triggered when a group member is kicked. The response contains information about the user who was kicked and the room they were kicked from."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "roomId": "",\n  "userId": "userId"\n}\n')),(0,o.kt)("h4",{id:"5-v1onmyonline"},"5. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnMyOnline")),(0,o.kt)("p",null,"Triggered when the online status of users changes. The response contains an array of objects, each object representing a user's online status."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "peerId": "peerId",\n    "isOnline": true\n  },\n  {\n    "peerId": "peerId2",\n    "isOnline": false\n  }\n]\n')),(0,o.kt)("h4",{id:"6-v1onroomstatuschange"},"6. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnRoomStatusChange")),(0,o.kt)("p",null,"Triggered when the room status changes. The status can be an enum of ",(0,o.kt)("inlineCode",{parentName:"p"},"(stop, typing, recording)"),". The response contains information about the user who changed the status and the room the status was changed in."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "name",\n  "status": "status",\n  "userId": "userId",\n  "roomId": "roomId"\n}\n')),(0,o.kt)("h4",{id:"7-v1ondeliverchatroom"},"7. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnDeliverChatRoom")),(0,o.kt)("p",null,"Triggered when a chat room is delivered. The response contains information about the room, the user, and the date of delivery."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "roomId": "roomId",\n  "userId": "userId",\n  "date": "date"\n}\n')),(0,o.kt)("h4",{id:"8-v1onexception"},"8. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnException")),(0,o.kt)("p",null,"Triggered when an exception occurs. The response contains the error message."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "error": "error"\n}\n')),(0,o.kt)("h4",{id:"9-v1onenterchatroom"},"9. ",(0,o.kt)("inlineCode",{parentName:"h4"},"v1OnEnterChatRoom")),(0,o.kt)("p",null,"Triggered when a user enters a chat room. The response contains information about the room, the user, and the date of entry."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "roomId": "roomId",\n  "userId": "userId",\n  "date": "date"\n}\n')),(0,o.kt)("h3",{id:"call-events-only-if-you-use-vchatwebrtc"},"Call Events (only if you use ",(0,o.kt)("inlineCode",{parentName:"h3"},"vChatWebRtc"),")"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnCallAccepted")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnCallEnded")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnCallCanceled")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnCallRejected")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnNewCall")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnCallTimeout")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("inlineCode",{parentName:"li"},"v1OnIceCandidate"))))}p.isMDXComponent=!0},4233:(e,n,t)=>{t.d(n,{Z:()=>a});const a=t.p+"assets/images/socket_headers-f85e0ca5ca8163d8c32f57ae28a653b9.png"}}]);